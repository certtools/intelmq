import sys
import time
from lib.bot import *
from lib.utils import *
from lib.event import *
from lib.cache import *

class MalwareDomainListFeedBot(Bot):

    def process(self):
        url = "http://www.malwaredomainlist.com/updatescsv.php"
        report = fetch_url(url, timeout = 60.0, chunk_size = 16384)
	report_ascii = report.decode('ascii','ignore')  # [FIXME]
	self.pipeline.send(report_ascii)


if __name__ == "__main__":
    bot = MalwareDomainListFeedBot(sys.argv[1])
    bot.start()
